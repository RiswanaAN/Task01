<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup Page</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
      $(document).ready(function(){
        $("#fname").blur(function(){
          let fname = document.getElementById("fname").value;
          if (fname.length == 0) {
              document.getElementById("emp1").innerText = "Enter the First Name";
            } else {
                document.getElementById("emp1").innerText = "";
            }
        });
        $("#lname").blur(function(){
          let lname = document.getElementById("lname").value;
          if (lname.length == 0) {
              document.getElementById("emp2").innerText = "Enter the Last Name";
            } else {
                document.getElementById("emp2").innerText = "";
            }
        });
        $("#username").blur(function(){
          let username = document.getElementById("username").value;
          if (username.length == 0) {
            document.getElementById("emp3").innerHTML = "Enter the UserName";
          }else {
            document.getElementById("emp3").innerText = "";
          }
        });
        $("#psw").blur(function(){
          let pswd = document.getElementById("psw").value;
          let lowercase = /[a-z]/;
          let uppercase = /[A-Z]/;
          let numeral = /[0-9]/;

          if (pswd.length === 0 || (!lowercase.test(pswd) || !uppercase.test(pswd) || !numeral.test(pswd))) {
            document.getElementById("emp4").innerHTML = "Password should have at least 1 uppercase, 1 lowercase, 1 numeral";
          }else {
            document.getElementById("emp4").innerText = "";
          }
        });
        $("#confirmpswd").blur(function(){
          let pswd = document.getElementById("psw").value;
          let confirm_pswd = document.getElementById("confirmpswd").value;
          if (confirm_pswd.length == 0 || pswd != confirm_pswd) {
              document.getElementById("emp5").innerHTML = "Passwords do not match";
          } else {
              document.getElementById("emp5").innerText = "";
          }
      });
    });
      function registerUser() {
        let fname = document.getElementById("fname").value;
        let lname = document.getElementById("lname").value;
        console.log(fname, lname);
        let username = document.getElementById("username").value;
        let pswd = document.getElementById("psw").value;
        let confirm_pswd = document.getElementById("confirmpswd").value;
        
        if (
          fname.length >= 3 &&
          lname.length >= 2 &&
          username.length >= 3 &&
          pswd.length >= 5 &&
          pswd == confirm_pswd
        ) {
          let credential = {
            fname: fname,
            lname: lname,
            username: username,
            pswd: pswd,
          };

          newCredential = JSON.stringify(credential);
          window.localStorage.setItem("userCredential", newCredential);
          window.location.href = "login.html";
        }

        console.log(localStorage.userCredential);
      }
    </script>
  </head>
  <body>
    <div class="container">
      <form>
        <h1>Register</h1>

        <input
          type="text"
          id="fname"
          placeholder="First Name"
          required
          value=""
        />
        <p id="emp1"></p>
        <input
          type="text"
          id="lname"
          placeholder="Last Name"
          required
          value=""
        />
        <p id="emp2"></p>
        <input
          type="text"
          id="username"
          placeholder="User Name"
          required
          value=""
        />
        <p id="emp3"></p>
        <input
          type="password"
          id="psw"
          placeholder="Password"
          required
          value=""
        />
        <p id="emp4"></p>
        <input
          type="password"
          id="confirmpswd"
          placeholder="Confirm Password"
          required
          value=""
        />
        <p id="emp5"></p>
        <button id="btn" type="button" onclick="registerUser()">Signup</button>
      </form>
    </div>
  </body>
</html>
